"use strict";window.GM||(window.GM={}),window.console||(window.console={log:function(){}}),function(t){if(t&&t.fn&&!t.fn.dataV1){var i=[],n=function(n){var e,o,s,r=this[0];return t.each(i,function(i,h){return e=h.el,e===r?(o=h.obj,t.each(o,function(t,i){return i.name===n?(s=i.value,!1):void 0}),!1):void 0}),s},e=function(n,e){var o=!1,s=this;t.each(i,function(i,r){if(r.el===s){var h=r.obj,u=!1;return t.each(h,function(t,i){return i.name===n?(i.value=e,u=!0,!1):void 0}),u||h.push({name:n,value:e}),o=!0,!1}}),o||i.push({el:s,obj:[{name:n,value:e}]})},o=function(n){var e=this;t.each(i,function(i,o){if(o.el===e){var s=o.obj;return t.each(s,function(t,i){return i.name===n?(s.splice(t,1),!1):void 0}),!1}})};t.fn.dataV1=function(t,i){var o=arguments.length;return 1===o?n.call(this,t):this.each(function(){e.call(this,t,i)})},t.fn.removeDataV1=function(t){return this.each(function(){o.call(this,t)})}}}(window.Zepto||window.jQuery),function(t){if(t&&t.fn&&!t.fn.touchendV1){var i,n,e,o,s,r,h=30,u=750,a="ontouchend"in document,c=function(){n={nowTime:new Date},e=!1,r=!1,o=s=0};t(window).on("scroll",function(){e=!0});var f=function(i,n){var e=this,o=t.type(i);"function"===o?i.apply(e,n):"array"===o&&t.each(i,function(i,o){"function"===t.type(o)&&o.apply(e,n)})};t.fn.touchendV1=function(d,l,p){var _,g,v,m,b,w=this,y=arguments.length;switch(y){case 1:l=d,d=void 0;break;case 2:"function"==typeof d&&(p=l,l=d,d=void 0,"function"==typeof p&&(b=p,p=void 0));break;case 3:"function"==typeof p&&(b=p,p=void 0)}if("object"===t.type(l)&&(_=l.touchstart,g=l.touchmove,v=l.touchend,m=l.touchcancel,b=l.callbackNoDelay,l=l.callback),"function"!=typeof b&&"function"==typeof l){var k=String(l).indexOf("e.preventDefault()")>-1,D=String(l).indexOf("e.stopPropagation()")>-1;switch(!0){case k&&D:b=function(t){t.preventDefault(),t.stopPropagation()};break;case k:b=function(t){t.preventDefault()};break;case D:b=function(t){t.stopPropagation()}}}var E,V=function(t){t.originalEvent&&(t=t.originalEvent);var i=t&&(t.changedTouches||t.targetTouches||t.touches);return!i};return E=a?[{n:"touchstart",f:function(t){if(f.call(this,_,arguments),!V(t)){c();var i=t.touches[0];n.x1=i.pageX,n.y1=i.pageY}}},{n:"touchmove",f:function(t){if(f.call(this,g,arguments),!V(t)){var i=t.touches[0];n.x2=i.pageX,n.y2=i.pageY,o+=Math.abs(n.x1-n.x2),s+=Math.abs(n.y1-n.y2)}}},{n:"touchend",f:function(t){var a=this,c=arguments;if(f.call(a,v,c),!V(t)){var d=!e,p=0===o&&0===s,_=h>o&&h>s,g=new Date-n.nowTime<u,m=!r;d&&(p||_)&&g&&m&&(f.call(a,b,c),i=setTimeout(function(){d=!e,d&&f.call(a,l,c)},0))}}},{n:"touchcancel",f:function(t){f.call(this,m,arguments),V(t)||(r=!0)}}]:[{n:"click",f:function(){var t=this,i=arguments;f.call(t,[b,l],i)}}],E.push({n:"touchendV1",f:function(){var t=this,i=arguments;a&&f.call(t,[_,g,v,m],i),f.call(t,[b,l],i)}}),E.forEach(function(t){var i=y>=2,n=[];n.push(t.n),i&&n.push(d),n.push(t.f),p===!0&&!function(){var n={n:t.n,f:t.f};i&&(n.child=d);var e=w.dataV1(l);e||w.dataV1(l,[]),w.dataV1(l).push(n)}(),w.on.apply(w,n)}),this},t.fn.offTouchendV1=function(i,n){var e=this,o=arguments.length;switch(o){case 1:n=i,i=void 0}if("function"!=typeof n)return void console.log("Para should be a function");var s=e.dataV1(n),r=t.type(s);if("array"!==r)return void console.log('Can"t find the eventHandler store in the dom when call offTouchendV1');var h,u,a,c=s.length;for(h=0;c>h;h++){u=s[h];var f=u.n,d=u.f,l=u.child;a=function(){s.splice(h,1),h--,c--},1===o?(e.off(f,d),a()):l===i&&(e.off(f,i,d),a())}return 0===c&&e.removeDataV1(n),this}}}(window.Zepto||window.jQuery),function(t){function i(){this.fns=[]}i.prototype={constructor:i,subscribe:function(t){return"function"==typeof t&&this.fns.push(t),this},subscribeOnce:function(t){return"function"==typeof t&&(t.EXCUTED_ONCE=!0,this.fns.push(t)),this},unsubscribe:function(t){if(0===arguments.length)return void(this.fns=[]);if("function"==typeof t){for(var i=this.fns,n=0,e=i.length;e>n;n++)i[n]===t&&(i.splice(n,1),n--,e--);return this}},fire:function(){for(var t,i=this.fns,n=0,e=i.length;e>n;n++)t=i[n],t.apply(null,arguments),t.EXCUTED_ONCE===!0&&(this.unsubscribe(t),n--,e--);return this}},t.PA||(t.PA={}),t.PA.ui||(t.PA.ui={}),t.PA.ui.ObserverV2=i}(this),function(t){function i(t,i,n,e){if("function"==typeof t){var o=arguments.length;switch(o){case 2:"function"==typeof i&&(e=i,i=void 0);break;case 3:"function"==typeof n&&(e=n,n=void 0)}return clearTimeout(t.timeId),t.timeId=setTimeout(function(){t.call(n||window),"function"==typeof e&&e()},i||25),this}}t.PA||(t.PA={}),t.PA.ui||(t.PA.ui={}),t.PA.ui.throttleV2=i}(this),function(t,i){if(i&&i.fn){var n=function(){function t(t){var n,e;return i[t]||(n=document.createElement(t),document.body.appendChild(n),e=getComputedStyle(n,"").getPropertyValue("display"),n.parentNode.removeChild(n),"none"==e&&(e="block"),i[t]=e),i[t]}var i={};return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=t(this.nodeName))})},e=function(){return this.css("display","none")};i.fn.showV1||(i.fn.showV1=n),i.fn.hideV1||(i.fn.hideV1=e)}}(this,window.Zepto||window.jQuery),function(t,i){i&&i.fn&&!i.fn.scrollLeft&&(i.fn.scrollLeft=function(t){if(this.length){var i="scrollLeft"in this[0];return void 0===t?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}})}(this,window.Zepto||window.jQuery),function(t,i){function n(t){if(!(this instanceof n))return void console.log("LightboxV2 错误: 初始化弹层的时候需要用new");var o={cssMask:{position:"fixed",height:"100%",width:"100%",left:0,top:0,opacity:"0.5",backgroundColor:"#000"},cssTarget:{"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},target:null,hideDelayTime:-1,maskShow:!0,isFixed:!1,clickMask:!0,targetClass:null,maskClass:null,addEvent:!0,position:!0,positionCenter:!0,positionMiddle:!0};this._option=i.extend(!0,{},o,t);var s=this._$dom=this._option.target;return"string"===i.type(s)&&(this._option.target=this._$dom=i(s)),this.isExitDom()?(this._$mask=i("<div></div>"),this._store.push(this),this._domHeight=null,this._domWidth=null,this._oParentLeft=0,this._oParentTop=0,this._eventObj=null,this._isInit=!1,this._isDisposed=!1,this._isRecaSize=!0,this._hideDelayTimeout=null,this._hideDelayTimeStore=this._option.hideDelayTime,this._hideDelayFunc=function(){clearTimeout(this._hideDelayTimeout),this._option.hideDelayTime=this._hideDelayTimeStore},this._shown=new e,this._hidden=new e,this._disposed=new e,this._showing=new e,this._showingAfter=new e,this._hiding=new e,void(this._hidingAfter=new e)):void console.log("LightboxV2 错误: 初始化时找不到target元素")}if(i){var e=PA.ui.ObserverV2,o=PA.ui.throttleV2,s=9999,r=s-1,h="ontouchend"in document,u=navigator.userAgent.toLowerCase(),a=u.indexOf("android")>-1;n.prototype={constructor:n,_store:[],_page:{$body:null,$document:null,$window:null,winHeight:null,winWidth:null},getStore:function(){return this._store},notStore:function(){var t,i,n,e,o,s=this,r=[],h=arguments.length,u=s._store,a=u.length;for(t=0;a>t;t++){for(o=!1,n=u[t],i=0;h>i;i++)if(e=arguments[i],n===e){o=!0;break}o||r.push(n)}return r},removeStore:function(){var t,i,n,e,o=this,s=arguments.length,r=o._store,h=r.length;if(0===s)return o._store=[],this;for(t=0;s>t;t++)for(n=arguments[t],i=0;h>i;i++)if(e=r[i],n===e){r.splice(i,1),i--,h--;break}return this},isVisible:function(){var t=this._$dom;return!(!t.width()&&!t.height())&&"none"!==t.css("display")},_isPosInteger:function(t){var n=/^(([1-9]\d*)|0)$/,e=i.type(t),o="number"===e&&t>=0,s="string"===e&&n.test(t);return o||s},_logError:function(t){return console.log("LightboxV2 错误: 调用 "+t+" 方法时找不到target元素"),this},hideDelay:function(t){if(!this.isExitDom())return this._logError("hideDelay"),this;var i=arguments.length;0===i&&(t=3e3);var n=this,e=n._isPosInteger(t);if(!e)return this;var n=this;return t=Number(t),clearTimeout(n._hideDelayTimeout),n.unHookHiding(n._hideDelayFunc),n._option.hideDelayTime=-1,n._hideDelayTimeout=setTimeout(function(){n.hide()},t),n.hookHidingOnce(n._hideDelayFunc),this},getMask:function(){return this._$mask},getDom:function(){return this._$dom},isExitDom:function(){return this._$dom&&this._$dom.length>0&&!this._isDisposed},_getWinWidth:function(){var t=this,i=t._page,n=i.$window;return h?n.width():document.documentElement.clientWidth},_getWinHeight:function(){var t=this,i=t._page,n=i.$window;return h?n.height():document.documentElement.clientHeight},_getDocHeight:function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},_getDocWidth:function(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)},_createEvent:function(){var t=this,i=t._option,n=t._page,e=n.$window,s=i.addEvent,r=i.isFixed,u=i.positionCenter,a=i.positionMiddle,c=function(){if(t.isVisible()){var i=t._getWinWidth(),e=t._getWinHeight(),o=Math.abs(i-n.winWidth),s=Math.abs(e-n.winHeight);(o>5||s>5)&&(t._setDomSize(),o>5&&(n.winWidth=i,u&&t._positionCenter.call(t)),s>5&&(n.winHeight=e,(!h||r)&&a&&t._positionMiddle.call(t)))}},f=function(){o(c,100)};return{bind:function(){s&&i.position&&e.on("resize",f)},unbind:function(){s&&i.position&&e.off("resize",f)}}},_addEvent:function(){var t=this;return t._eventObj||(t._eventObj=t._createEvent()),t._eventObj},_positionCenter:function(){var t,i,n,e=this,o=e._$dom,s=e._option,r=e._page,h=r.$window,u=s.isFixed,a=e._domWidth,c=e._oParentLeft,f=r.winWidth,d=f-a;0>d?(i=h.scrollLeft(),n=e._getDocWidth(),t=i+a-n,t>0&&n>a||(d=0)):d/=2,d-=c,u||(i=i||h.scrollLeft(),d+=i),o.css({left:d})},_positionMiddle:function(){var t,i,n,e=this,o=e._$dom,s=e._option,r=e._page,h=r.$window,u=s.isFixed,a=e._domHeight,c=e._oParentTop,f=r.winHeight,d=f-a;0>d?(i=h.scrollTop(),n=e._getDocHeight(),t=i+a-n,t>0&&n>a||(d=0)):d/=2,d-=c,u||(i=i||h.scrollTop(),d+=i),o.css({top:d})},_position:function(){var t=this,i=t._$dom,n=t._option,e=t._page,o=n.position,s=n.positionMiddle,r=n.positionCenter;if(o){var h=e.$window;t._isRecaSize&&(e.winHeight=t._getWinHeight(),e.winWidth=t._getWinWidth(),i.showV1(),t._setDomSize(),i.hideV1(),t._isRecaSize=!1,h.one("resize",function(){t._isRecaSize=!0})),s&&t._positionMiddle(),r&&t._positionCenter()}},position:function(){if(!this.isExitDom())return this._logError("position"),this;var t=this;return t.isVisible()&&(t._setDomSize(),t._positionMiddle(),t._positionCenter()),this},positionMiddle:function(){if(!this.isExitDom())return this._logError("positionMiddle"),this;var t=this;return t.isVisible()&&(t._setDomSize(),t._positionMiddle()),this},positionCenter:function(){if(!this.isExitDom())return this._logError("positionCenter"),this;var t=this;return t.isVisible()&&(t._setDomSize(),t._positionCenter()),this},_initEvent:function(){var t=this,n=t._option,e=t._$dom,o=t._$mask,s=n.clickMask,r=function(){var t,n=i("html");return function(){clearTimeout(t),n.css("pointer-events","none"),t=setTimeout(function(){n.css("pointer-events","auto")},301)}}(),u=function(){h&&a&&r(),t.hide()};s&&o.touchendV1({callbackNoDelay:function(t){t.preventDefault()},callback:function(){u()}});var c=function(t,i){return"close"===t.attr("data-pa-lightbox")?void("function"==typeof i&&i()):void(t[0]===e[0]||t.length<1||c(t.parent(),i))},f=!1,d=function(t,n,e){var o=i(t.target);c(o,function(){var t=o.prop("tagName"),i=(o.attr("href"),"true"===o.attr("data-lightbox-bindclick")),s=i||t&&"a"===t.toLowerCase();s?"function"==typeof e&&e():"function"==typeof n&&n()})};e.touchendV1({callbackNoDelay:function(t){d(t,function(){f=!0,t.preventDefault()},function(){f=!1})},callback:function(t){d(t,function(){u()})}}),h&&e.on("click",function(t){var n=i(t.target);c(n,function(){return f?void(f=!1):void u()})})},_setDomSize:function(){var t=this,i=t._option,n=t._$dom,e=i.isFixed;return t.isExitDom()&&t.isVisible()?(t._domHeight=n.height(),t._domWidth=n.width(),e||!function(){var i,e=n.offsetParent();"static"!==e.css("position")&&(i=e.offset(),t._oParentTop=i.top,t._oParentLeft=i.left)}(),this):this},_initDom:function(){var t,n=this,e=n._$dom,o=n._$mask,s=n._page,r=n._option,h=r.maskShow,u=r.maskClass,a=r.targetClass;s.$body=t=i("body"),s.$document=i(document),s.$window=i(window);var c=r.isFixed,f=r.cssTarget,d=r.cssMask,l=r.position,p=r.positionCenter,_=r.positionMiddle;e.css(f),a&&e.addClass(a),e.parent().length<1&&e.appendTo(t),h&&(o.hideV1().css(d).insertAfter(e),u&&o.addClass(u)),l&&(p||_)&&e.css(c?{position:"fixed"}:{position:"absolute"})},_setPara:function(t){var n=i.type(t);return"function"===n?t={callback:t}:"object"!==n&&(t={}),t},show:function(t){if(!this.isExitDom())return this._logError("show"),this;var i=this;i._showing.fire();var n=i._$dom,e=i._$mask,o=i._option,h=o.maskShow;t=i._setPara(t);var u=t.callback;s+=2,r+=2;var a=s,c=r;i._isInit||(i._isInit=!0,i._initDom(),i._initEvent()),i._position(),i._addEvent().bind(),i._showingAfter.fire();var f=function(){i._shown.fire();var t=o.hideDelayTime,n=i._isPosInteger(t);n&&i.hideDelay(t),"function"==typeof u&&u()};return h&&e.css({zIndex:c}).showV1(),n.css({zIndex:a}).showV1(),f(),this},hide:function(t){if(!this.isExitDom())return this._logError("hide"),this;var i=this;i._hiding.fire();var n=i._option,e=i._$dom,o=i._$mask,s=n.maskShow;t=i._setPara(t);var r=t.callback;i._isInit||(i._isInit=!0,i._initDom(),i._initEvent()),i._addEvent().unbind(),i._hidingAfter.fire();var h=function(){i._hidden.fire(),"function"==typeof r&&r()};return s&&o.hideV1(),e.hideV1(),h(),this},dispose:function(t){if(!this.isExitDom())return this._logError("dispose"),this;var i=this;t=i._setPara(t);var n=t.callback;return i._addEvent().unbind(),i._$mask.remove(),i._$dom.remove(),i._isDisposed=!0,i.removeStore(i),i._disposed.fire(),"function"==typeof n&&n(),this},_hookFunc:function(t,i,n){if(!this.isExitDom())return this._logError("hook或unhook"),this;var e,o="LightboxV2_bind_this_GM";return"function"==typeof n&&n.bind&&this[t]&&this[t][i]&&("unsubscribe"===i?e=n[o]:i.indexOf("subscribe")>-1&&(e=n.bind(this),n[o]=e),e&&this[t][i](e)),this},hookShown:function(t){var i=["_shown","subscribe",t];return this._hookFunc.apply(this,i)},hookShownOnce:function(t){var i=["_shown","subscribeOnce",t];return this._hookFunc.apply(this,i)},unHookShown:function(t){var i=["_shown","unsubscribe"];return arguments.length>0&&i.push(t),this._hookFunc.apply(this,i)},hookHidden:function(t){var i=["_hidden","subscribe",t];return this._hookFunc.apply(this,i)},hookHiddenOnce:function(t){var i=["_hidden","subscribeOnce",t];return this._hookFunc.apply(this,i)},unHookHidden:function(t){var i=["_hidden","unsubscribe"];return arguments.length>0&&i.push(t),this._hookFunc.apply(this,i)},hookShowing:function(t){var i=["_showing","subscribe",t];return this._hookFunc.apply(this,i)},hookShowingOnce:function(t){var i=["_showing","subscribeOnce",t];return this._hookFunc.apply(this,i)},unHookShowing:function(t){var i=["_showing","unsubscribe"];return arguments.length>0&&i.push(t),this._hookFunc.apply(this,i)},hookShowingAfter:function(t){var i=["_showingAfter","subscribe",t];return this._hookFunc.apply(this,i)},hookShowingAfterOnce:function(t){var i=["_showingAfter","subscribeOnce",t];return this._hookFunc.apply(this,i)},unHookShowingAfter:function(t){var i=["_showingAfter","unsubscribe"];return arguments.length>0&&i.push(t),this._hookFunc.apply(this,i)},hookHiding:function(t){var i=["_hiding","subscribe",t];return this._hookFunc.apply(this,i)},hookHidingOnce:function(t){var i=["_hiding","subscribeOnce",t];return this._hookFunc.apply(this,i)},unHookHiding:function(t){var i=["_hiding","unsubscribe"];return arguments.length>0&&i.push(t),this._hookFunc.apply(this,i)},hookHidingAfter:function(t){var i=["_hidingAfter","subscribe",t];return this._hookFunc.apply(this,i)},hookHidingAfterOnce:function(t){var i=["_hidingAfter","subscribeOnce",t];return this._hookFunc.apply(this,i)},unHookHidingAfter:function(t){var i=["_hidingAfter","unsubscribe"];return arguments.length>0&&i.push(t),this._hookFunc.apply(this,i)},hookDisposed:function(t){var i=["_disposed","subscribe",t];return this._hookFunc.apply(this,i)},unHookDisposed:function(t){var i=["_disposed","unsubscribe"];return arguments.length>0&&i.push(t),this._hookFunc.apply(this,i)}},t.PA||(t.PA={}),t.PA.ui||(t.PA.ui={}),t.PA.ui.LightboxV2=n}}(this,window.Zepto||window.jQuery);